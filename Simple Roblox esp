-- Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

-- Settings
local Settings = {
    ESPColor = Color3.fromRGB(255, 0, 0),
    FOVSize = 100,
    ESPEnabled = false
}

-- Create GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

local MenuFrame = Instance.new("Frame")
MenuFrame.Size = UDim2.new(0, 200, 0, 150)
MenuFrame.Position = UDim2.new(0.5, -100, 0.5, -75)
MenuFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
MenuFrame.Parent = ScreenGui

local espToggle = Instance.new("TextButton")
espToggle.Size = UDim2.new(1, 0, 0, 50)
espToggle.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
espToggle.Text = "Toggle ESP"
espToggle.Parent = MenuFrame

local fovSizeInput = Instance.new("TextBox")
fovSizeInput.Size = UDim2.new(1, 0, 0, 50)
fovSizeInput.Position = UDim2.new(0, 0, 0, 50)
fovSizeInput.PlaceholderText = "FOV Size"
fovSizeInput.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
fovSizeInput.Parent = MenuFrame

local FOVCircle = Instance.new("Frame")
FOVCircle.Size = UDim2.new(0, Settings.FOVSize, 0, Settings.FOVSize)
FOVCircle.Position = UDim2.new(0.5, -Settings.FOVSize/2, 0.5, -Settings.FOVSize/2)
FOVCircle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
FOVCircle.BackgroundTransparency = 0.5
FOVCircle.Visible = false
FOVCircle.Parent = ScreenGui

-- Function to Toggle ESP
local function toggleESP()
    Settings.ESPEnabled = not Settings.ESPEnabled

    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character then
            for _, part in ipairs(player.Character:GetChildren()) do
                if part:IsA("Model") and Settings.ESPEnabled then
                    local highlight = Instance.new("Highlight", part)
                    highlight.FillColor = Settings.ESPColor
                    highlight.FillTransparency = 0.5
                    highlight.OutlineTransparency = 0
                end
            end
        end
    end
end

-- Update FOV Circle
local function updateFOVCircle()
    FOVCircle.Size = UDim2.new(0, Settings.FOVSize, 0, Settings.FOVSize)
end

-- Event connections
espToggle.MouseButton1Click:Connect(function()
    toggleESP()
end)

fovSizeInput.FocusLost:Connect(function(entered)
    if entered then
        local size = tonumber(fovSizeInput.Text)
        if size then
            Settings.FOVSize = size
            updateFOVCircle()
            FOVCircle.Visible = true
        end
    end
end)

-- Run the circle update
RunService.RenderStepped:Connect(updateFOVCircle)

print("ESP Script Loaded")
